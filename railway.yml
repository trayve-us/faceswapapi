# Railway configuration for CodeFormer Face Swap API
version: 2

build:
  nixpacks:
    providers:
      - python
    phases:
      build:
        commands:
          - pip install -r requirements.txt
          - bash bin/post_compile

deploy:
  startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
  healthcheckPath: /health

environment:
  PYTHONPATH: .:./CodeFormer:./CodeFormer/basicsr
  OPENCV_IO_ENABLE_OPENEXR: "0"
